<code>
#include "platform.h"

struct InputBox : Component
{
    ArenaString* content;
    bool is_focused;
    bool show_watermark;
    int cursor_pos;

    void CompMain(DOM* dom)
    {
        content = CreateString(dom->strings);
    }
    
    void OnEvent(DOM* dom, Event* event)
    {
        switch(event->type)
        {
            // Note(Leo): We only get key events if we are focused
            case(EventType::KEY_DOWN):
            {
                user_input(event);
            
                break;
            }
            // Note(Leo): We only have 1 focusable element here so we dont bother checking an ID
            case(EventType::FOCUSED):
            {
                #if PLATFORM_ANDROID
                    PlatformShowVirtualKeyboard(true);
                #endif
                            
                is_focused = true;
                break;
            }
            case(EventType::DE_FOCUSED):
            {
                #if PLATFORM_ANDROID
                    // Todo(Leo): Do we need to do this?
                    PlatformShowVirtualKeyboard(false);
                #endif
                is_focused = false;
                break;
            }
            case(EventType::VIRTUAL_KEYBOARD):
            {
                #if PLATFORM_ANDROID
                    is_focused = false;
                #endif
                
                break;
            }
            default:
            {
                break;
            }
        }
    }
    
    
    void user_input(Event* in)
    {   
        switch(in->Key.code)
        {
            case(K_BACKSPACE):
            {
                if(!content->length)
                {
                    return;
                }
                Remove(content, content->length - 1, 1);
                return;
            }
            case(K_SHIFT):
            case(K_SHIFT_R):
            case(K_SHIFT_L):
            case(K_WIN_L):
            case(K_WIN_R):
            case(K_ALT_L):
            case(K_ALT_R):
            case(K_ESCAPE):
            case(K_ENTER):
            case(K_CAPS):
            case(K_TAB):
            {
                
                return;
            }
            default:
            {
                break;
            }
        }
        
        if(!in->Key.key_char)
        {
            return;
        }
        
        // Todo(Leo): Properly convert the UTF-32 codepoint to UTF-8 instead of just grabbing the first byte
        char added_char = (char)in->Key.key_char;
        Append(content, &added_char, 1);
    }
};
</code>
<root>
<vdiv focusable>
	<hdiv condition="{return e->content->length > 0 && e->is_focused}">
		{content}
	</hdiv>
	<hdiv condition="{return e->content->length == 0 && e->is_focused}">
        Enter some text...
	</hdiv>
	<hdiv condition="{return !e->is_focused}">
        Click to focus!
	</hdiv>
</vdiv>

</root>

<style>
root, vdiv, hdiv {
	margin: grow, grow;
	width: fit;
	height: fit;
}

hdiv!hover {
	color: 12, 12, 12;
}

</style>
